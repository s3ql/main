dist: xenial
sudo: enabled

language: python
python:
  - "3.5"
  - "3.6"
  - "3.7-dev"

cache: pip

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y fuse psmisc pkg-config libattr1-dev libfuse-dev libsqlite3-dev libjs-sphinxdoc texlive-latex-base texlive-latex-recommended texlive-latex-extra texlive-generic-extra texlive-fonts-recommended
  - "printf 'Current libsqlite3-dev version: %s' $(dpkg-query --show --showformat='${Version}' libsqlite3-dev)"

install:
  - pip install .

script:
  - python setup.py build_cython || travis_terminate 1
  - python setup.py build_ext --inplace || travis_terminate 1
  - python setup.py test || travis_terminate 1
  - python setup.py build_sphinx || travis_terminate 1
  - python setup.py install
